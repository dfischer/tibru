:def env [1 #0 0]
:def tl [1 #1 0]
:def tltl [1 #2 0]
:def tlhd [1 #1 1]
:def hd [1 #0 1]
:def nil 0
:def exit 0
:def const 0
:def sel 1
:def x [1 #0 1 #0 1]
:def y [1 #0 1 #1 1]
:def z [1 #0 1 #2 1]
:def frame hd
:def self x

:trace on

:def exitenv [env exit']

![ [x exit'] [[1 2 3 nil] nil] ]

![ [env 22' exitenv'] 23 ]

![ [nil' 23' 22' 21' env [hd tl [frame exit']']'] nil ]

:def f [nil' y self env [hd tl [env self]']']
![ [nil' 21' f' env [hd tl [env f']']'] nil ]

:def inc [1 2 3 4 5 nil]
/[inc #2 1]

:def next [1' hd 1' #0' sel' env [exit'' tl hd [hd inc' tl]']']
![next #3 nil]



