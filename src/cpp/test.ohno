:trace on
:names on

:def qt 0
:def nil 0
:def exit 0
:def sel 1
:def env [1 #0 0]
:def stk [1 #0 0]
:def hd [sel #0 1]
:def tl [sel #1 0]
:def k [sel #0 1]
:def pop0 [sel #1 0]
:def pop1 [sel #2 0]
:def pop2 [sel #3 0]
:def v0 [sel #1 1]
:def v1 [sel #2 1]
:def v2 [sel #3 1]

:def exitenv [env exit']
:def mk21 [pop0 #21' k]
:def id [pop1 v0 k]

:def f id

% call a function
% ![f [exitenv #21 nil]]

% stage a function call
% ![[stk #22' id' exitenv' %] nil]

:def heap [0 0 0 0 0 0]


:def inc_table [#1 #2 #3 #4 #5 #6 #7 #8 #9 #10 nil]

:def lookup1 [1' v1 1' #1' sel' env [k' tl pop2' hd [hd tl]']']
![lookup1 [exitenv inc_table #3 heap]]


